<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Tienda Virtual</title>
  
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
    <!-- Tus estilos -->
    <link rel="stylesheet" href="./css/nav.css">
    <link rel="stylesheet" href="./css/index.css">
  
    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
    <style>
      .contacto-grid { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
      @media (max-width:768px) { .contacto-grid { grid-template-columns:1fr; } }
    </style>
  </head>
  
<body>

  <!-- ===== HEADER ===== -->
    <!-- ===== HEADER ===== -->
    <header class="navbar navbar-expand-lg bg-white shadow-sm fixed-top py-2">
      <div class="container-fluid d-flex align-items-center justify-content-between gap-3">
  
        <!-- Logo -->
        <div class="logo d-flex align-items-center gap-2">
          <img src="./img/logo.png" alt="Logo Tienda" class="rounded-circle" />
          <h1 class="h5 mb-0 fw-bold">Tienda Virtual</h1>
        </div>
  
        <!-- NAV -->
        <nav class="flex-grow-1 position-relative">
          <!-- BotÃ³n menÃº mÃ³vil (usa tu JS de siempre) -->
          <div class="menu-toggle d-lg-none ms-auto border rounded px-2 py-1" 
               id="menuToggle" aria-hidden="false">
            â˜°
          </div>
  
          <ul id="navMenu" 
              class="list-unstyled align-items-center justify-content-center mb-0 gap-3">
            <li><a href="#" class="nav-link px-2">Inicio</a></li>
  
            <li class="dropdown" id="dropdownContainer">
              <a href="#" class="dropbtn nav-link px-2" id="productosDrop">Productos â–¾</a>
              <ul class="dropdown-content" id="dropdownCategorias">
                <!-- categorÃ­as dinÃ¡micas -->
                <li><a href="#" data-cat="Todas">Todas</a></li>
              </ul>
            </li>
  
            <li><a href="#contacto" class="nav-link px-2">Contacto</a></li>
          </ul>
        </nav>
  
        <!-- Acciones header -->
        <div class="header-actions d-flex align-items-center gap-2">
          <button id="btn-login" class="btn-login btn btn-sm">
            Iniciar sesiÃ³n
          </button>
  
          <div class="carrito d-flex align-items-center" id="carritoIcon"
               onclick="abrirCarrito()" aria-label="Abrir carrito" role="button" title="Carrito">
            <svg class="carrito-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M3 3h2l1 5h13l-1.3 6.5a2 2 0 0 1-2 1.5H9" stroke="currentColor" stroke-width="1.5"/>
              <circle cx="11" cy="20" r="1" fill="currentColor"/>
              <circle cx="18" cy="20" r="1" fill="currentColor"/>
            </svg>
            <span class="carrito-count" id="carritoCount">0</span>
          </div>
  
          <div id="user-info" class="user-info" aria-live="polite" style="display:none;">
            <span id="user-nombre"></span>
            <button id="logout-btn" onclick="logout()">Cerrar sesiÃ³n</button>
          </div>
        </div>
  
      </div>
    </header>
  

  <!-- ===== CART (ASIDE) ===== -->
  <div class="overlay" id="overlay" onclick="cerrarCarrito()"></div>
  <aside class="carrito-modal" id="carritoModal" aria-hidden="true" role="dialog" aria-label="Carrito de compras">
    <div class="carrito-header">
      <h2>ğŸ›’ Tu Carrito</h2>
      <button class="close-modal" onclick="cerrarCarrito()" aria-label="Cerrar carrito">Ã—</button>
    </div>

    <div class="carrito-items" id="carritoItems" aria-live="polite"></div>

    <div class="carrito-summary">
      <div id="carritoTotal" class="carrito-total">Total: S/ 0.00</div>
      <div class="carrito-actions">
        <button class="btn-pagar" onclick="procesarPagoPayPal()">ğŸ’³ Pagar con PayPal</button>
        <button class="btn-mercadopago" onclick="procesarPagoSimulado()">ğŸ’° Mercado Pago</button>
        <button class="btn-vaciar" onclick="vaciarCarrito()">ğŸ—‘ï¸ Vaciar</button>
      </div>
    </div>
  </aside>

  <!-- ===== BANNER ===== -->
  <section class="banner">
    <img src="./img/banner/banner.jpg" alt="Banner principal" />
    <div class="banner-texto">Bienvenido a Tienda Virtual</div>
  </section>

  <!-- ===== PRODUCTOS ===== -->
  <main class="seccion-productos" id="mainProductos">
    <!-- JS llenarÃ¡ esto -->
  </main>

  <!-- ===== CONTACTO ===== -->
  <!-- ===== CONTACTO ===== -->
  <section class="seccion-contacto" id="contacto">
    <h2 class="text-center mb-3">ContÃ¡ctanos</h2>

    <div class="row contacto-grid g-4 align-items-stretch">
      <div class="col-12 col-lg-6">
        <form id="formContacto" class="d-flex flex-column gap-2">
          <input type="text" id="contactNombre" class="form-control" placeholder="Tu nombre" required>
          <input type="email" id="contactEmail" class="form-control" placeholder="Tu correo" required>
          <input type="text" id="contactAsunto" class="form-control" placeholder="Asunto" required>
          <textarea id="contactMensaje" class="form-control" placeholder="Escribe tu mensaje..." rows="5" required></textarea>
          <button type="submit" class="btn btn-success w-100 mt-2">Enviar Mensaje</button>
        </form>
      </div>

      <div class="col-12 col-lg-6">
        <div class="mapa-container">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3901.781813555474!2d-77.02824692477333!3d-12.046171088175997!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9105c5f619ee3ec7%3A0x14206cb9cc452b4a!2sLima!5e0!3m2!1ses!2spe!4v1690000000000!5m2!1ses!2spe"
            width="100%" height="100%" style="border:0; min-height:300px; border-radius:12px;"
            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </div>
    </div>
  </section>


  <!-- ===== FOOTER ===== -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Tienda Virtual</h3>
        <p>Tu tienda de confianza para compras en lÃ­nea</p>
        <div class="social-links">
          <a href="#" aria-label="Facebook">ğŸ“˜ Facebook</a>
          <a href="#" aria-label="Instagram">ğŸ“· Instagram</a>
          <a href="#" aria-label="WhatsApp">ğŸ’¬ WhatsApp</a>
        </div>
      </div>
      
      <div class="footer-section">
        <h4>Enlaces RÃ¡pidos</h4>
        <ul>
          <li><a href="#">Inicio</a></li>
          <li><a href="#contacto">Contacto</a></li>
          <li><a href="./html/login.html">Iniciar SesiÃ³n</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h4>Contacto</h4>
        <p>ğŸ“§ info@tiendavirtual.com</p>
        <p>ğŸ“ +51 987 654 321</p>
        <p>ğŸ“ Lima, PerÃº</p>
      </div>
      
      <div class="footer-section">
        <h4>Horario de AtenciÃ³n</h4>
        <p>Lunes a Viernes: 9:00 AM - 7:00 PM</p>
        <p>SÃ¡bados: 9:00 AM - 2:00 PM</p>
        <p>Domingos: Cerrado</p>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2024 Tienda Virtual. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Loader modal de pago -->
  <div id="modalCarga" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:9999; justify-content:center; align-items:center;">
    <div style="background:#222;padding:30px 50px;border-radius:12px;color:#fff;text-align:center;">
      <div style="border:5px solid #ccc;border-top:5px solid #4CAF50;border-radius:50%;width:50px;height:50px; margin:0 auto 12px; animation:spin 1s linear infinite;"></div>
      <div>Procesando su pago, por favor espere...</div>
    </div>
  </div>
  <style>@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}</style>

  <!-- Tu JS unificado -->
  <script src="./js/index.js" type="module"></script>
</body>
</html>

